(this["webpackJsonpphoto-share"]=this["webpackJsonpphoto-share"]||[]).push([[0],{117:function(e,t,a){e.exports=a(282)},122:function(e,t,a){},282:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(59),s=a.n(r),l=(a(122),a(11)),c=a(12),i=a(14),u=a(13),p=a(15),h=a(2),m=a(20),d=a(4),f=a.n(d),b=a(27),E=a(40),g=a(105),v=a.n(g),x=function(){return window.history.replaceState({},document.title,window.location.pathname)},y=o.a.createContext(),N=function(){return Object(n.useContext)(y)},O=function(e){var t=N(),a=t.isAuthenticated,n=t.logout,r=function(){e.toggleMenu(!e.menuIsOpen)};return o.a.createElement(o.a.Fragment,null,a&&o.a.createElement("div",{className:"nav-container"},o.a.createElement("div",{className:"mobile-nav container is-d-md-none has-py-3"},o.a.createElement("div",{className:"is-d-flex is-justify-between is-align-center"},o.a.createElement(h.b,{to:"/upload",className:"btn is-secondary has-text-white"},o.a.createElement("span",{className:"icon-upload has-mr-2"}),"Upload"),o.a.createElement("div",null,o.a.createElement("button",{className:"mobile-menu-button "+(e.menuIsOpen?"is-active":""),onClick:r,"aria-label":"Toggle menu","aria-expanded":"false","aria-haspopup":"true"},o.a.createElement("span",{className:"burger-icon","aria-hidden":"true"},o.a.createElement("span",null)),"Menu"))),o.a.createElement("nav",{className:e.menuIsOpen?"is-open":""},o.a.createElement("ul",{className:"is-list-unstyled"},o.a.createElement("li",null,o.a.createElement(h.b,{to:"/",onClick:r},"Home")),o.a.createElement("li",null,o.a.createElement(h.b,{to:"/professional",onClick:r},"Professional Photos")),o.a.createElement("li",null,o.a.createElement(h.b,{to:"/party",onClick:r},"Party Photos")),o.a.createElement("li",null,o.a.createElement(h.b,{to:"/other",onClick:r},"Other Photos")),o.a.createElement("li",null,o.a.createElement(h.b,{to:"/upload",onClick:r},"Upload Photos")),o.a.createElement("li",{className:"has-text-center"},o.a.createElement("button",{className:"btn is-primary",onClick:function(){return n()}},"Log out"))))),o.a.createElement("div",{className:"desktop-nav container is-d-none is-d-md-block has-py-3"},o.a.createElement("nav",{className:"is-d-flex is-justify-end"},o.a.createElement("ul",{className:"is-list-unstyled is-d-flex is-align-center"},o.a.createElement("li",null,o.a.createElement(h.b,{to:"/"},"Home")),o.a.createElement("li",null,o.a.createElement(h.b,{to:"/professional"},"Professional Photos")),o.a.createElement("li",null,o.a.createElement(h.b,{to:"/party"},"Party Photos")),o.a.createElement("li",null,o.a.createElement(h.b,{to:"/other"},"Other Photos")),o.a.createElement("li",null,o.a.createElement(h.b,{to:"/upload"},"Upload Photos")),o.a.createElement("li",null,o.a.createElement("button",{className:"btn is-primary",onClick:function(){return n()}},"Log out")))))))},P=a(115),w=a(8),k=a.n(w),j=a(108),S=a.n(j),I=a(62),C="democloudname",U="m6xedmg5",B=function(e){return e.photos.map((function(t,a){return o.a.createElement("div",{key:t.public_id,className:"photo col-4 col-md-3 col-xl-2"},o.a.createElement("div",{className:"aspect-ratio-container is-1x1 has-mb-6"},o.a.createElement("div",{className:"aspect-ratio-content has-zoom"},o.a.createElement("button",{onClick:function(t){return function(t){var a=parseInt(t.currentTarget.id);e.lightBoxState(!0),e.updatePhotoIndex(a)}(t)},id:a},o.a.createElement(I.Image,{className:"media-cover",cloudName:C,publicId:t.public_id,width:"200",height:"200",crop:"thumb",quality:"auto"},o.a.createElement(I.Transformation,{quality:"auto",fetchFormat:"auto"}))))))}))},R=function(e){return o.a.createElement("div",{className:"spinner-container"},o.a.createElement("span",{className:"spinner"},o.a.createElement("span",{className:"left"},o.a.createElement("span",{className:"anim"})),o.a.createElement("span",{className:"right"},o.a.createElement("span",{className:"anim"}))))},T=a(109);Object(T.addBackToTop)({backgroundColor:"#17aacf",scrollDuration:400,zIndex:100,showWhenScrollTopIs:100});var _=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).fetchPhotos=function(e){var t={cloudName:e,format:"json",type:"list"},n=function(e,t){var a=w.Util.withSnakeCaseKeys(t);return w.Cloudinary.new().url(e,a)}(a.props.tag,t);S.a.get(n).then((function(e){var t=e.data.resources,n=Object(P.a)(t).sort((function(e,t){var a=e.public_id.toUpperCase(),n=t.public_id.toUpperCase();return a<n?-1:a>n?1:0}));a.props.updatePhotoList(n)}))},a.state={spinnerShowing:!0},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchPhotos(C)}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.photos!==e.photos||this.state.spinnerShowing!==t.spinnerShowing}},{key:"componentDidUpdate",value:function(e){this.props.photos!==e.photos&&this.setState({spinnerShowing:!1})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"container has-pt-11"},o.a.createElement("h3",{className:"has-mb-2"},this.props.tag," photos"),this.props.photos.length," images found",this.props.photos.length>0&&o.a.createElement("div",{className:"image-list row has-mt-6"},o.a.createElement(B,{photos:this.props.photos,lightBoxState:function(t){return e.props.lightBoxState(t)},updatePhotoIndex:function(t){return e.props.updatePhotoIndex(t)}})),this.state.spinnerShowing&&o.a.createElement(R,null))}}]),t}(o.a.Component),L=function(e){var t=e.component,a=e.path,r=Object(E.a)(e,["component","path"]),s=N(),l=s.isAuthenticated,c=s.loginWithRedirect;Object(n.useEffect)((function(){f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=3;break}return e.next=3,f.a.awrap(c({appState:{targetUrl:"/#"+a}}));case 3:case"end":return e.stop()}}))}),[l,c,a]);return o.a.createElement(m.a,Object.assign({path:a,key:a,render:function(e){return!0===l?o.a.createElement(t,e):null}},r))},W=function(e){var t=N(),a=t.isAuthenticated,r=t.loginWithRedirect,s=e.lightBoxState,l=N().loading;return Object(n.useEffect)((function(){s(!1)}),[]),l?o.a.createElement(R,null):o.a.createElement(o.a.Fragment,null,a&&o.a.createElement("section",{className:"home has-pt-10"},o.a.createElement("header",{className:"header-with-title-block has-mb-6"},o.a.createElement("div",{className:"header-image is-d-flex is-align-end"},o.a.createElement("div",{className:"container header-content"},o.a.createElement("h1",{className:"has-text-uppercase has-text-white has-text-center has-mb-2 has-mb-md-0"},o.a.createElement("span",{className:"is-d-block is-d-sm-inline"},"Our")," wedding photos"),o.a.createElement("hr",{className:"is-in-header"}),o.a.createElement("p",{className:"header-sub-title has-text-center has-text-gray-0 has-mt-2 has-mt-md-3"})))),o.a.createElement("div",{className:"container"},o.a.createElement("p",{className:"has-text-center has-pt-3 has-pb-6"},"You can view or download our wedding photos and also upload yours from the party"," ",o.a.createElement(h.b,{to:"/upload",className:"has-font-size-body has-text-secondary has-font-weight-bold"},"here"),"."),o.a.createElement("div",{className:"row is-d-flex is-justify-center"},o.a.createElement("div",{className:"col-sm-4 has-text-center"},o.a.createElement("h3",null,o.a.createElement(h.b,{to:"/professional",className:"has-text-secondary"},"Professional Photos"))),o.a.createElement("div",{className:"col-sm-4 has-text-center"},o.a.createElement("h3",null,o.a.createElement(h.b,{to:"/party",className:"has-text-secondary"},"Party Photos"))),o.a.createElement("div",{className:"col-sm-4 has-text-center"},o.a.createElement("h3",null,o.a.createElement(h.b,{to:"/other",className:"has-text-secondary"},"Other Photos")))))),!a&&o.a.createElement("section",{className:"login-hero is-d-flex is-justify-center is-align-center"},o.a.createElement("div",{className:"container has-text-center"},o.a.createElement("h2",{className:"has-mb-3"},"Tom & Laura's wedding album"),o.a.createElement("p",{className:"sub-title has-mt-0 has-mb-5"},"Login below to view, download and share photos"),o.a.createElement("button",{className:"btn is-primary",onClick:function(){return r({})}},"Log in"))))},M=a(110),A=(a(275),new k.a.Cloudinary({cloud_name:C})),q=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.photoIndex!==e.photoIndex||this.props.isOpen!==e.isOpen}},{key:"render",value:function(){var e=this,t=this.props,a=t.isOpen,n=t.photos,r=t.photoIndex,s=n.map((function(e){return A.url(e.public_id,{quality:"auto:best",width:800,height:800,crop:"fit"})})),l=n.map((function(e){return A.url(e.public_id,{quality:"100",flags:"attachment"})}));return o.a.createElement("div",null,a&&o.a.createElement(M.a,{mainSrc:s[r],nextSrc:s[(r+1)%s.length],prevSrc:s[(r+s.length-1)%s.length],imageTitle:o.a.createElement("a",{href:l[r],download:"Photo",target:"_blank",rel:"noopener noreferrer"},o.a.createElement("span",{className:"icon-download has-mr-2"}),"Download"),onCloseRequest:function(){return e.props.lightBoxState(!1)},onMovePrevRequest:function(){e.props.updatePhotoIndex((r+s.length-1)%s.length)},onMoveNextRequest:function(){e.props.updatePhotoIndex((r+1)%s.length)},animationDuration:600}))}}]),t}(o.a.Component),z=a(116),D=a(112),F=a.n(D),J=a(114),Q=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.uploadedPhoto,t=e.response,a=Math.floor(e.progress.percent);return o.a.createElement("div",null,o.a.createElement("h3",null,e.fileName),o.a.createElement("div",{className:"status"},!t&&o.a.createElement("div",null,"Uploading... ",a,"%"),!t&&o.a.createElement("div",null,"In progress"),t&&o.a.createElement("div",{className:"status-code"},"Upload completed ",t.statusText)),o.a.createElement("div",{className:"progress-bar has-mt-6"},o.a.createElement("div",{className:"progress",role:"progressbar",style:{width:a+"%"}})))}}]),t}(n.Component),Y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={uploadedPhoto:{}},a.photoId=1,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"container has-pt-11"},o.a.createElement(J.a,{id:"direct-upload-dropzone",disableClick:!0,multiple:!1,accept:"image/*",style:{position:"relative"},onDrop:function(t){return e.onPhotoSelected(t)}},(function(t){var a=t.getRootProps,n=t.getInputProps;return o.a.createElement("div",Object.assign({id:"direct-upload",className:"outline-none"},a()),o.a.createElement("h3",null,"Share Photo"),o.a.createElement("p",null,"Add a photo from the party by clicking Upload."),o.a.createElement("p",null,"You can also drag and drop an image file into the dashed area."),o.a.createElement("p",null,"After Your photo has been uploaded it will be available on the Party Photos page in less than 2 minutes."),o.a.createElement("form",null,o.a.createElement("div",{className:"is-d-flex is-align-center"},o.a.createElement("label",{className:"is-d-block has-mr-6"},"Image:"),o.a.createElement("div",{className:"upload_button_holder"},o.a.createElement("label",{className:"btn is-secondary",htmlFor:"fileupload"},o.a.createElement("span",{className:"icon-upload has-mr-2"}),"Upload"),o.a.createElement("input",Object.assign({},n(),{type:"file",id:"fileupload",accept:"image/*",multiple:"multiple",ref:function(t){return e.fileInputEl=t},onChange:function(){return e.onPhotoSelected(e.fileInputEl.files)}}))))),o.a.createElement("p",null,"Status"))})),this.state.uploadedPhoto.progress&&o.a.createElement(Q,{uploadedPhoto:this.state.uploadedPhoto}),o.a.createElement(h.b,{className:"back_link has-text-primary is-d-block has-mt-6",exact:"true",to:"/party"},o.a.createElement("span",{className:"icon-back has-mr-2"}),"Back to photos"))}},{key:"onPhotoSelected",value:function(e){var t=this,a="https://api.cloudinary.com/v1_1/".concat(C,"/upload"),n=!0,o=!1,r=void 0;try{for(var s,l=function(){var e=s.value,n=t.photoId++,o=e.name;F.a.post(a).field("upload_preset",U).field("file",e).field("multiple",!0).field("tags",t.props.tag).field("context","").on("progress",(function(e){return t.onPhotoUploadProgress(n,o,e)})).end((function(e,a){t.onPhotoUploaded(a)}))},c=e[Symbol.iterator]();!(n=(s=c.next()).done);n=!0)l()}catch(i){o=!0,r=i}finally{try{n||null==c.return||c.return()}finally{if(o)throw r}}}},{key:"onPhotoUploadProgress",value:function(e,t,a){this.setState({uploadedPhoto:{id:e,fileName:t,progress:a}})}},{key:"onPhotoUploaded",value:function(e){this.setState({uploadedPhoto:Object(z.a)({},this.state.uploadedPhoto,{response:e})})}}]),t}(n.Component),H=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).updatePhotoList=function(e){a.setState({photos:e})},a.updatePhotoIndex=function(e){a.setState({photoIndex:e})},a.lightBoxState=function(e){a.setState({isOpen:e})},a.toggleMenu=function(e){a.setState({menuIsOpen:e})},a.state={photos:[],photoIndex:0,isOpen:!1,menuIsOpen:!1},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"App"},o.a.createElement(h.a,null,o.a.createElement(O,{menuIsOpen:this.state.menuIsOpen,toggleMenu:function(t){return e.toggleMenu(t)}}),o.a.createElement(m.c,null,o.a.createElement(m.a,{path:"/",exact:!0,render:function(t){return o.a.createElement(W,Object.assign({},t,{lightBoxState:function(t){return e.lightBoxState(t)}}))}}),o.a.createElement(L,{path:"/professional/",exact:!0,render:function(t){return o.a.createElement(_,Object.assign({},t,{updatePhotoList:function(t){return e.updatePhotoList(t)},photos:e.state.photos,tag:"professional",lightBoxState:function(t){return e.lightBoxState(t)},updatePhotoIndex:function(t){return e.updatePhotoIndex(t)}}))}}),o.a.createElement(L,{path:"/party/",exact:!0,render:function(t){return o.a.createElement(_,Object.assign({},t,{updatePhotoList:function(t){return e.updatePhotoList(t)},photos:e.state.photos,tag:"party",lightBoxState:function(t){return e.lightBoxState(t)},updatePhotoIndex:function(t){return e.updatePhotoIndex(t)}}))}}),o.a.createElement(L,{path:"/other/",exact:!0,render:function(t){return o.a.createElement(_,Object.assign({},t,{updatePhotoList:function(t){return e.updatePhotoList(t)},photos:e.state.photos,tag:"others",lightBoxState:function(t){return e.lightBoxState(t)},updatePhotoIndex:function(t){return e.updatePhotoIndex(t)}}))}}),o.a.createElement(L,{path:"/upload/",exact:!0,render:function(e){return o.a.createElement(Y,Object.assign({},e,{tag:"Party"}))}}))),o.a.createElement(q,{isOpen:this.state.isOpen,photoIndex:this.state.photoIndex,photos:this.state.photos,updatePhotoIndex:function(t){return e.updatePhotoIndex(t)},lightBoxState:function(t){return e.lightBoxState(t)}}))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=a(63);s.a.render(o.a.createElement((function(e){var t=e.children,a=e.onRedirectCallback,r=void 0===a?x:a,s=Object(E.a)(e,["children","onRedirectCallback"]),l=Object(n.useState)(),c=Object(b.a)(l,2),i=c[0],u=c[1],p=Object(n.useState)(),h=Object(b.a)(p,2),m=h[0],d=h[1],g=Object(n.useState)(),N=Object(b.a)(g,2),O=N[0],P=N[1],w=Object(n.useState)(!0),k=Object(b.a)(w,2),j=k[0],S=k[1],I=Object(n.useState)(!1),C=Object(b.a)(I,2),U=C[0],B=C[1];Object(n.useEffect)((function(){!function(){var e,t,a,n,o;f.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,f.a.awrap(v()(s));case 2:if(e=l.sent,P(e),!window.location.search.includes("code=")){l.next=10;break}return l.next=7,f.a.awrap(e.handleRedirectCallback());case 7:t=l.sent,a=t.appState,r(a);case 10:return l.next=12,f.a.awrap(e.isAuthenticated());case 12:if(n=l.sent,u(n),!n){l.next=19;break}return l.next=17,f.a.awrap(e.getUser());case 17:o=l.sent,d(o);case 19:S(!1);case 20:case"end":return l.stop()}}))}()}),[]);return o.a.createElement(y.Provider,{value:{isAuthenticated:i,user:m,loading:j,popupOpen:U,loginWithPopup:function(){var e,t,a=arguments;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:{},B(!0),n.prev=2,n.next=5,f.a.awrap(O.loginWithPopup(e));case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),console.error(n.t0);case 10:return n.prev=10,B(!1),n.finish(10);case 13:return n.next=15,f.a.awrap(O.getUser());case 15:t=n.sent,d(t),u(!0);case 18:case"end":return n.stop()}}),null,null,[[2,7,10,13]])},handleRedirectCallback:function(){var e;return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return S(!0),t.next=3,f.a.awrap(O.handleRedirectCallback());case 3:return t.next=5,f.a.awrap(O.getUser());case 5:e=t.sent,S(!1),u(!0),d(e);case 9:case"end":return t.stop()}}))},getIdTokenClaims:function(){return O.getIdTokenClaims.apply(O,arguments)},loginWithRedirect:function(){return O.loginWithRedirect.apply(O,arguments)},getTokenSilently:function(){return O.getTokenSilently.apply(O,arguments)},getTokenWithPopup:function(){return O.getTokenWithPopup.apply(O,arguments)},logout:function(){return O.logout.apply(O,arguments)}}},t)}),{domain:K.domain,client_id:K.clientId,redirect_uri:window.location.origin,onRedirectCallback:function(e){window.history.replaceState({},document.title,e&&e.targetUrl?e.targetUrl:window.location.pathname)}},o.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},63:function(e){e.exports=JSON.parse('{"domain":"dev-4kb19768.auth0.com","clientId":"NQ17lzQIkULpkQKRizV4dx487fl6XFCb"}')}},[[117,1,2]]]);
//# sourceMappingURL=main.e0e96d8f.chunk.js.map